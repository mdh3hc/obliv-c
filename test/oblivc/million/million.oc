#include<obliv.oh>
#include"million.h"

void millionaire(void* args)
{
  protocolIO *io=args;
  obliv int v1,v2;
  bool eq,lt;
  obliv int average;
  int y;
  
  v1 = feedOblivInt(io->mywealth,1);         //This is the first input
  v2 = feedOblivInt(io->mywealth,2);         //This is the second input
  average = (v1+v2)/2;
  revealOblivInt(&y,average,0);
  revealOblivBool(&eq,v1==v2,0);	  //boolean comparing inputs (v1 and v2)
  revealOblivBool(&lt,v1<v2,0);		  //boolean comparing inputs
  io->cmp = (!eq?lt?y:y:y);	    //This is the output (1<2):(1>2):(1=2)
}


